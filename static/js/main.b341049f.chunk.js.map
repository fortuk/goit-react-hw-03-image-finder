{"version":3,"sources":["components/Modal/Modal.module.css","components/Button/Button.module.css","components/loader/loader.module.css","components/App/App.module.css","components/SearchBar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","api/imagesApi.js","components/Button/Button.jsx","components/Modal/Modal.jsx","components/loader/loader.jsx","components/App/App.jsx","index.js","components/SearchBar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","searchRequest","handleNameChange","event","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","toast","error","className","s","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","tags","dataSrc","onClick","alt","ImageGalleryItemImage","ImageGallery","images","map","id","webformatURL","largeImageURL","api","fetchImagesWithQuery","query","page","url","fetch","then","response","json","Button","Modal","onEscClick","code","onClose","onBackdropClick","target","window","addEventListener","removeEventListener","Overlay","Load","color","height","width","timeout","styles","loader","App","showModal","loading","largeImageSrc","status","modalImg","modalAlt","handleSearchbarSubmit","request","fetchImages","toggleModal","setCurrentPictureSrc","imgForModal","dataset","altForModal","_","prevState","prevQuery","nextQuery","prevPage","nextPage","scrollTo","top","document","documentElement","scrollHeight","behavior","imagesApi","hits","length","alert","catch","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b341049f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1ngiu\",\"Modal\":\"Modal_Modal__dEnCA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1Bshm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__1s3jy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__zBosM\",\"App-logo\":\"App_App-logo__QyRxk\",\"App-logo-spin\":\"App_App-logo-spin__1ue_b\",\"App-header\":\"App_App-header__1d28a\",\"App-link\":\"App_App-link__2RLM7\",\"container\":\"App_container__1iiBA\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    searchRequest: '',\n  };\n\n  handleNameChange = event => {\n    this.setState({ searchRequest: event.currentTarget.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (!this.state.searchRequest) {\n      toast.error('Ввдите данные в строку поиска');\n      return;\n    }\n    this.props.onSubmit(this.state.searchRequest);\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchRequest}\n            onChange={this.handleNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import PropTypes from 'prop-types';\n\nimport s from '../ImageGallery/ImageGallery.module.css';\n\nconst ImageGalleryItem = ({ src, tags, dataSrc, onClick }) => {\n  return (\n    <li onClick={onClick}>\n      <img\n        src={src}\n        data-src={dataSrc}\n        alt={tags}\n        className={s.ImageGalleryItemImage}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  dataSrc: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\n\nconst ImageGallery = ({ images, onClick }) => {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(({ id, webformatURL, largeImageURL, tags }) => (\n        <ImageGalleryItem\n          key={id}\n          src={webformatURL}\n          dataSrc={largeImageURL}\n          tags={tags}\n          onClick={onClick}\n        />\n      ))}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      largeImageURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ).isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","const API_KEY = '23027480-c70d45ac3781d0e477b4a7117';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nfunction fetchImagesWithQuery(query, page) {\n  const url = `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n  return fetch(url).then(response => response.json());\n}\nconst api = { fetchImagesWithQuery };\nexport default api;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.onEscClick);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.onEscClick);\n  }\n\n  onEscClick = event => {\n    const ESC_KEY_CODE = 'Escape';\n\n    if (event.code === ESC_KEY_CODE) {\n      this.props.onClose();\n    }\n  };\n\n  onBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { largeImageURL } = this.props;\n    return (\n      <div className={s.Overlay} onClick={this.onBackdropClick}>\n        <div className={s.Modal}>\n          <img src={largeImageURL} alt=\"modalImg\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nModal.propTypes = {\n  largeImage: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import Loader from 'react-loader-spinner';\nimport styles from '../loader/loader.module.css';\n\nconst Load = () => {\n  return (\n    <Loader\n      type=\"MutatingDots\"\n      color=\"#00BFFF\"\n      height={100}\n      width={100}\n      timeout={500}\n      className={styles.loader}\n    />\n  );\n};\n\nexport { Load };\n","import React, { Component } from 'react';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Searchbar from '../SearchBar/Searchbar';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport imagesApi from '../../api/imagesApi';\nimport Button from '../Button/Button';\nimport Modal from '../Modal/Modal';\nimport { Load } from '../loader/loader';\nimport s from '../App/App.module.css';\n\nexport default class App extends Component {\n  state = {\n    showModal: false,\n    images: [],\n    searchRequest: '',\n    loading: false,\n    error: null,\n    page: 1,\n    largeImageSrc: '',\n    alt: '',\n    status: 'idle',\n    modalImg: '',\n    modalAlt: '',\n  };\n\n  componentDidUpdate(_, prevState) {\n    const prevQuery = prevState.searchRequest;\n    const nextQuery = this.state.searchRequest;\n\n    const prevPage = prevState.page;\n    const nextPage = this.state.page;\n\n    if (nextPage > 1) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      });\n    }\n\n    if (prevQuery !== nextQuery) {\n      this.setState({ images: [], status: 'pending' });\n    }\n\n    if (prevQuery !== nextQuery || prevPage !== nextPage) {\n      imagesApi\n        .fetchImagesWithQuery(nextQuery, nextPage)\n        .then(({ hits }) => {\n          const images = hits.map(\n            ({ id, webformatURL, largeImageURL, tags }) => {\n              return { id, webformatURL, largeImageURL, tags };\n            },\n          );\n          if (images.length > 0) {\n            this.setState(prevState => {\n              return {\n                images: [...prevState.images, ...images],\n                status: 'resolved',\n              };\n            });\n          } else {\n            alert(`По запросу ${nextQuery} ничего не найдено.`);\n            this.setState({ status: 'idle' });\n          }\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }));\n    }\n  }\n\n  handleSearchbarSubmit = request => {\n    if (request !== this.state.searchRequest) {\n      this.setState({ searchRequest: request, page: 1, status: 'pending' });\n    }\n  };\n\n  fetchImages = () => {\n    this.setState(({ page }) => {\n      return { page: page + 1, status: 'pending' };\n    });\n\n    return;\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  setCurrentPictureSrc = event => {\n    const imgForModal = event.target.dataset.src;\n    const altForModal = event.target.alt;\n    this.setState({\n      showModal: true,\n      modalImg: imgForModal,\n      modalAlt: altForModal,\n    });\n  };\n\n  render() {\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handleSearchbarSubmit} />\n\n        {this.state.images.length !== 0 && (\n          <ImageGallery\n            toggleModal={this.setCurrentPictureSrc}\n            images={this.state.images}\n          />\n        )}\n        {this.state.showModal && (\n          <Modal onClose={this.toggleModal}>\n            <div>\n              <img src={this.state.largeImageSrc} alt={this.state.alt} />\n            </div>\n          </Modal>\n        )}\n        {this.state.loading && <Load />}\n        {this.state.images.length > 0 && (\n          <div className={'container'}>\n            <Button onClick={this.fetchImages} />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App/App';\r\nimport 'modern-normalize/modern-normalize.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__S9upa\",\"SearchForm\":\"Searchbar_SearchForm__2sxL3\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1PjhR\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2CprE\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2TNRc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3cOtY\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__NFLG8\",\"ImageGalleryItemImage\":\"ImageGallery_ImageGalleryItemImage__2mJio\"};"],"sourceRoot":""}